#!/usr/bin/env php
<?php

if (file_exists(__DIR__.'/../../../autoload.php')) {
    require __DIR__.'/../../../autoload.php';
} else {
    require __DIR__.'/../vendor/autoload.php';
}

use Illuminate\Container\Container;
use Illuminate\Events\Dispatcher;
use Illuminate\Console\Application;
use Illuminate\Config\Repository;

$container = new Container;
$container->instance('app', $container);
$container['config'] = new Repository(require __DIR__ . '/config.php');

$events = new Dispatcher($container);

$kurort = new Application($container, $events, 'Version 1');
$kurort->setName('My Console App Name');

// Bind a command
$kurort->resolve(\Kurort\Cli\Commands\HelloWorld::class);
$kurort->resolve(\Kurort\Cli\Commands\ServiceStatus::class);

// Systems
$kurort->resolve(\Kurort\Cli\Commands\SystemCreateUser::class);
$kurort->resolve(\Kurort\Cli\Commands\SystemUpdate::class);

// Site
$kurort->resolve(\Kurort\Cli\Commands\SiteAdd::class);
$kurort->resolve(\Kurort\Cli\Commands\SiteRemove::class);

$kurort->run();